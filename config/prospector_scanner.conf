# Prospector Scanner Configuration - Updated for split keyboard battery display

# Scanner Mode Configuration
CONFIG_PROSPECTOR_MODE_SCANNER=y

# Bluetooth Configuration
CONFIG_BT=y
CONFIG_BT_OBSERVER=y

# Display Configuration
CONFIG_ZMK_DISPLAY=y
CONFIG_DISPLAY=y

# LVGL Configuration
CONFIG_LVGL=y

# Enable larger fonts for better readability
CONFIG_LV_FONT_MONTSERRAT_12=y
CONFIG_LV_FONT_MONTSERRAT_16=y  
CONFIG_LV_FONT_MONTSERRAT_18=y
CONFIG_LV_FONT_MONTSERRAT_20=y
CONFIG_LV_FONT_MONTSERRAT_22=y
CONFIG_LV_FONT_MONTSERRAT_24=y
CONFIG_LV_FONT_MONTSERRAT_28=y

# Enable Unscii pixel fonts for retro style
CONFIG_LV_FONT_UNSCII_8=y
CONFIG_LV_FONT_UNSCII_16=y

# ‚ö° Prospector v1.1.1 Safe Brightness Control ‚ö°

# üéØ SAFE BRIGHTNESS CONTROL - Guaranteed to work on all hardware!
# 
# üü¢ FIXED BRIGHTNESS MODE (Current): 
# - Same as v1.0.0 - reliable fixed brightness percentage
# - No sensor hardware required
# - Always works, never fails to boot
# - Set CONFIG_PROSPECTOR_FIXED_BRIGHTNESS_USB to desired level (default: 85%)
#
# ‚ö†Ô∏è  SENSOR MODE REMOVED FROM DEFAULT BUILD:
# - Sensor support temporarily removed to prevent boot failures
# - CONFIG_PROSPECTOR_USE_AMBIENT_LIGHT_SENSOR option still exists but requires:
#   1. Manual Device Tree overlay creation for I2C and APDS9960
#   2. Manual CONFIG_I2C=y, CONFIG_SENSOR=y, CONFIG_APDS9960=y
#   3. Proper hardware connection (SDA=D4, SCL=D5, VCC=3.3V, GND)
# - Advanced users only - default build focuses on reliability
#
# CURRENT MODE: Fixed brightness (100% reliable for all users)
CONFIG_PROSPECTOR_MULTI_KEYBOARD=y
CONFIG_PROSPECTOR_MAX_KEYBOARDS=2

# Layer Display Configuration
# Adjust this value based on your keyboard's layer count
# Range: 4-10 layers. Set to highest layer number + 1
# Examples: 6-layer keyboard ‚Üí set to 6, 8-layer keyboard ‚Üí set to 8
CONFIG_PROSPECTOR_MAX_LAYERS=7

# üîÜ BRIGHTNESS SETTINGS (v1.1.1 Safe Implementation)
# Fixed brightness percentage when CONFIG=n or sensor not found
CONFIG_PROSPECTOR_FIXED_BRIGHTNESS=85

# üåû SENSOR MODE ENABLED FOR TESTING (Device Tree overlay provided)
# Hardware required: APDS9960 connected (SDA=D4, SCL=D5, VCC=3.3V, GND)
CONFIG_PROSPECTOR_USE_AMBIENT_LIGHT_SENSOR=y
CONFIG_I2C=y
CONFIG_SENSOR=y
CONFIG_APDS9960=y
CONFIG_PROSPECTOR_ALS_MIN_BRIGHTNESS=20
CONFIG_PROSPECTOR_ALS_MAX_BRIGHTNESS_USB=100

# Scanner timeout - extended for battery operation (8 minutes)
# For testing, you can set a shorter timeout like 30000ms (30 seconds)
CONFIG_PROSPECTOR_SCANNER_TIMEOUT_MS=480000

# Battery operation power saving settings (require battery support enabled)
# Auto-dim display when keyboards go idle (2 minutes)
# CONFIG_PROSPECTOR_SCANNER_IDLE_BRIGHTNESS_MS=120000
# CONFIG_PROSPECTOR_SCANNER_IDLE_BRIGHTNESS_PERCENT=20

# Advertisement frequency-based dimming (requires battery support)
# CONFIG_PROSPECTOR_ADVERTISEMENT_FREQUENCY_DIM=y
# CONFIG_PROSPECTOR_ADV_FREQUENCY_DIM_THRESHOLD_MS=2000
# CONFIG_PROSPECTOR_ADV_FREQUENCY_DIM_BRIGHTNESS=25

# ‚ö†Ô∏è  SENSOR MODE Configuration (DEPRECATED)
# CRITICAL: Sensor mode now requires manual Device Tree overlay
# Default build has sensor support COMPLETELY REMOVED for safety
# This prevents boot failures on hardware without sensors

# Disable unused features
CONFIG_ZMK_SPLIT=n

# Disable serial/USB features that are causing Kconfig warnings
CONFIG_SERIAL=n
CONFIG_UART_CONSOLE=n
CONFIG_USB_CDC_ACM=n

# Enable debug logging only (without serial console)
CONFIG_LOG=y
CONFIG_ZMK_LOG_LEVEL_DBG=y
CONFIG_LOG_MODE_IMMEDIATE=y

# Note: USB serial debugging is not available in scanner mode
# Use visual debugging - watch display brightness changes
# Or use hardware debugger (J-Link/ST-Link) for RTT

# YADS-style modifier detection and NerdFont display
# Build trigger: Compilation error fix (function forward declaration)
# Resolves battery periodic update work queue definition order
# Updated Wed Aug  7 2025

# WPM (Words Per Minute) Configuration Examples
# Uncomment and modify these lines to customize WPM calculation
# Default: 30-second window with 2x multiplier (balanced responsiveness)

# Ultra-responsive (10-second window, 6x multiplier):
# CONFIG_ZMK_STATUS_ADV_WPM_WINDOW_SECONDS=10

# Very responsive (15-second window, 4x multiplier):
# CONFIG_ZMK_STATUS_ADV_WPM_WINDOW_SECONDS=15

# Balanced (30-second window, 2x multiplier) - DEFAULT:
# CONFIG_ZMK_STATUS_ADV_WPM_WINDOW_SECONDS=30

# Stable (60-second window, 1x multiplier - traditional WPM):
# CONFIG_ZMK_STATUS_ADV_WPM_WINDOW_SECONDS=60

# Custom decay timeout (default: auto = 2x window, e.g., 60s for 30s window):
# CONFIG_ZMK_STATUS_ADV_WPM_DECAY_TIMEOUT_SECONDS=90

# Scanner Battery Support (v1.1.0 - Optional Feature)
# ‚ö†Ô∏è  DISABLED BY DEFAULT - Enable only if you have battery hardware
# For battery operation setup, see "Battery Operation Setup" section in README

# Uncomment the following lines ONLY if you have a LiPo battery connected:
# CONFIG_PROSPECTOR_BATTERY_SUPPORT=y
# CONFIG_ZMK_BATTERY_REPORTING=y
# CONFIG_USB_DEVICE_STACK=y
# CONFIG_PROSPECTOR_BATTERY_UPDATE_INTERVAL_S=120

# Additional battery options (when enabled):
# CONFIG_PROSPECTOR_BATTERY_SHOW_PERCENTAGE=y
# CONFIG_PROSPECTOR_BATTERY_WIDGET_POSITION="TOP_RIGHT"
# CONFIG_ZMK_BATTERY_REPORT_INTERVAL=30

# ‚ÑπÔ∏è  NOTE: Scanner works perfectly without battery hardware
# The battery widget will auto-hide if no battery is detected

# Debug Widget Configuration (v1.1 development)
# Debug widget disabled for production use - battery issue resolved
CONFIG_PROSPECTOR_DEBUG_WIDGET=n

# Note: Battery support is disabled by default since no battery hardware is currently connected.
# For UI testing: Enable DEMO_MODE. For real use: Add 400mAh LiPo battery hardware.

